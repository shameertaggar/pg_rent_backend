# apphosting.yaml
runtime: nodejs22
build:
  command: "npm install"
  outputDirectory: "dist"

run:
  command: "npm start"
  port: 8080

env:
  - name: JWT_SECRET
    secret: "JWT_SECRET"  # must match the secret name in Firebase
  - name: SERVICE_ACCOUNT_KEY
    secret: "SERVICE_ACCOUNT_KEY"

runConfig:
  minInstances: 1        # minimum instances to handle traffic
  maxInstances: 10       # scale up to this many instances
  concurrency: 100        # requests handled per instance
